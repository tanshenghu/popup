define("widget/popup/1.0.0/popup",["$"],function(a,b,c){var d=a("$"),e=document,f="body",g=function(a){function b(){var a=g.find(".dialog-title"),b={ON:!1};d(e).on("mouseup",function(){a.css("cursor","default"),b.ON=!1}).on("mousemove",function(a){if(a=a||event,b.ON){var c=Math.min(a.clientX-b.L,b.BW),d=Math.min(a.clientY-b.T,b.BH);c=Math.max(c,0),d=Math.max(d,0),b.dialog.css({left:c+"px",top:d+"px"})}}),a.on("mousedown",function(c){c=c||event;var f=d(this);f.css("cursor","move"),b.L=c.clientX-f.offset().left,b.T=c.clientY-f.offset().top,b.dialog=a.closest('[poptype="tsh-popbox"]'),b.BW=e.documentElement.clientWidth-b.dialog.outerWidth(!0),b.BH=e.documentElement.clientHeight-b.dialog.outerHeight(!0),b.ON=!0})}var c=a.hand instanceof Array?a.hand[1]:d(a.hand),g=d(a.box),h="undefined"==typeof a.cover?!0:a.cover,i=a.zIndex||1e3,j=a.drag,k=a.fixed===!0?"fixed":"absolute",l=0,m=0,n=parseInt(a.width),o=parseInt(a.height),p=0,q=0,r=a.callback,s=a.hidefn,t=a.okfn,u=null,v=d(f);if(!g.length)return window.console&&console.log("error:not "+a.box),void 0;g.parent().prop("nodeName").toLowerCase()!=f&&v.append(g),g.attr("cover",h);var w=d("#coverPop").length?d("#coverPop"):d('<div id="coverPop"></div>');w.css({position:"fixed","z-index":i-1,left:"0",top:"0",right:"0",bottom:"0",display:"none","background-color":"black",opacity:"0.5"});var x=function(b){l=e.documentElement.clientWidth,m=e.documentElement.clientHeight,p=d(e).scrollTop()||0,q=d(e).scrollLeft()||0,a.width||(n=g.show().css("visibility",b===!0?"":"hidden").width()),a.height||(o=g.show().css("visibility",b===!0?"":"hidden").height());var c=0>.5*(l-n)?0:.5*(l-n)>l-n?l-n:.5*(l-n),f=0>.5*(m-o)?0:.5*(m-o)>m-o?m-o:.5*(m-o),h={position:k,"z-index":i,display:b===!0?"block":"none",left:c+q,"background-color":"white",top:f+p};return b!==!0&&g.hide().css("visibility",""),h},y=x();y.width=a.width?a.width:"auto",y.height=a.height?a.height:"auto",g.css(y),h&&g.before(w);var z=function(a){var b=!d(a).hasClass("disabled");return(void 0===typeof a||b)&&(g.css(x()),h&&w.css("z-index",g.css("z-index")-1).fadeIn(300),g.fadeIn(500),b&&"function"==typeof r&&r.apply(a,[g])),g},A=function(a){var b=d(a),c=v.children('[poptype="tsh-popbox"]'),e=c.not(g),f=c.length-1===c.filter(":hidden").length||0===e.filter('[cover="true"]:visible').length;if("i"!==(b.prop("nodeName")+"").toLowerCase()&&b.hasClass("disabled"))return"input is disabled!";if(h&&f)w.fadeOut(500);else if(!f){var i=0;e.filter('[cover="true"]:visible').each(function(){i=Math.max(i,d(this).css("zIndex"))}),i&&w.css("zIndex",i-1)}return g.fadeOut(300),"function"==typeof s&&s.apply(u,[this,g,!(!a||!a.nodeName)]),g};return"string"==typeof c?d(a.hand[0]).on("click",c,function(){u=this,z(this)}):c.on("click",function(){u=this,z(this)}),j&&b(),g.on("click",".ui-okBtn",function(){"function"==typeof t&&t.apply(u,[this,g])}),g.on("click",".closeMe",function(){A(this)}),g.attr("poptype","tsh-popbox"),g.Show=z,g.Hide=A,g.reSetPos=function(a){return g.css(d.extend(x(!0),a))},g};c.exports=g});
